---
title: "Curso programa estadístico R para el Análisis de Datos"
author: "Miguel A. Mayer"
date: "20/05/2017"
output:
  pdf_document: default
  html_document: default
---
***

## Instalación de R 

En primer lugar debemos instalar el programa estadístico R. Para ello debemos acceder a la web: 

## Instalación de RStudio

Una vez instalado R, debemos proceder a la instalación de RStudio. Para ello accedemos a la web:

## RStudio
![RStudio](/Users/mmayer/Documents/Mayer/Curso_R_Web/RStudio.jpg)



## Sección 1. Introducción y generalidades en estadística

Variables cualitativas:

Variables cuantitativas:


## Sección 2. Primeros pasos con R y RStudio

Introducimos los datos creando dos variables:
- genero
- edad

```{r}

genero <- c("h", "m", "m", "h","m","h")

edad <- c(23,45,34,39,60,52)

```

## Sección 3. Importación y exportación de datos

a) Importar los datos de pacientes.txt 

```{r}
pacientes <- read.table("pacientes.txt", 
                      sep="\t", header=TRUE)

```

## Sección 3. Estructura de datos  

#### Ejercicio 2. 

```{r pacientes}
str(pacientes)
dim(pacientes)
names(pacientes)

```

#### Ejercicio 3.  

#### Ejercicio 4.

#### Ejercicio 5.

#### Ejercicio 6.
```{r}



```


## Sección 3. Representación gráfica

### Variables cualitativas:

a) Diagrama de barras
```{r}
barplot(table(pacientes$Genero))

# Añadimos diversos parámetros para mejorar su representación
barplot(table(pacientes$Genero),
        main="Distribución género",
        col=c("red","blue"))

```

b) Diagrama de sectores

```{r}

pie(table(pacientes$Genero), main="Distribución por género",
                            col=c("red","blue"))

```


### Variables cuantitativas:

a) Histograma

```{r}
par(mfrow=c(1,2))
hist(pacientes$Colesterol, col=c("Orange"), 
     main="Distribución de Colesterol", 
     xlab="Colesterol (en mg/dl)", 
     ylab="Frecuencia")
hist(pacientes$Glucemia, 
     col=c("Blue"), 
     main="Distribución de Glucemia",
     xlab="Glucemia (en mg/dl)",
     ylab="Frecuencia", breaks=10)
```

b) Boxplot




### Sección 4. Estadística descriptiva

#### Ejercicio 7.

**Importamos**
```{r}
# Tablas de datos que pueden ser intersantes para observar la frecuencia de datos
table(pacientes$Genero)
table(pacientes$IAM)
table(pacientes$Trat)
```

**Variables cuantitativas**:
Resumen numérico básico
```{r}

# t-test para comparar las medias de colesterol en los grupos con IAM y sin IAM
# creando en primer lugar los subgrupos correspondientes
# mediante funciones como subset:
iamNo <- subset(pacientes, IAM=="No", select="Colesterol") # o selec=c(Colesterol)
iamSi <- subset(pacientes, IAM=="Si", select="Colesterol")

# otra forma de realizar subsetting: con "which"
# iamNo <- pacientes[which(pacientes$IAM == "No"), "Colesterol"]
# iamSi <- pacientes[which(pacientes$IAM == "Si"), "Colesterol"]

###### representación para comparar los valores de colesterol entre pacientes
###### con IAM y sin IAM
# creación de colores transparentes
mycol2 <- rgb(255,255,0, max=255, alpha=125) # color amarillo
mycol <- rgb(0,0,255, max=255, alpha=125) # color azul
# gráficos paralelos
par(mfrow=c(1,2))
hist(iamSi$Colesterol, 
        col=mycol, 
        xlab="Pacientes con IAM",
        breaks=5,
        ylab="Colesterol")
hist(iamNo$Colesterol, 
     col=mycol,
     xlab="Pacientes sin IAM",
     ylab="Colesterol")

```

**Histogramas**
```{r}

```


**Boxplots**
```{r}
# comparación mediante boxplot
boxplot(Colesterol ~ IAM, 
        data=pacientes,
        main="Colesterol en pacientes sin IAM y con IAM",
        ylab="Colesterol (mg/dl)", xlab="IAM")

```


**t-test**
```{r}
# realización del t-test
t.test(iamNo, iamSi, var.equal=TRUE)
```

Obtenemos un valor de p < 0.05 y por tanto existen diferencias
significativas entre ambos grupos de pacientes en cuanto a la 
presencia de IAM y colesterol, siendo la media de 206,06 mg/dl en 
aquellos que no tienen IAM y de 268,11 en los que presentan IAM


**Regresión simple**

Regresión simple entre edad y glucemia y colesterol siendo la Edad la variable independiente.

```{r}

##### Regresión simple entre edad y glucemia y colesterol.
# siendo la Edad la variable independiente
fit <- lm(pacientes$Glucemia ~ pacientes$Edad)
summary(fit)
# Nos indica que con una p < 0.05 la edad influye en los valores de
# glucemia y la recta de regresión es: glucemia = 44.247 + 1.2495*edad
# A mayor edad, valores de glucemia más altos


```


```{r}
##### Gráficos de ambas variables
plot(pacientes$Colesterol ~ pacientes$Edad)
plot(pacientes$Glucemia ~ pacientes$Edad)
```


#### Ejercicio 8. Variable edad en intervalos

Transformación de la variable edad en determinados intervalos.

```{r}



```

